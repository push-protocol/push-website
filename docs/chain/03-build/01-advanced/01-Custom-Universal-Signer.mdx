---
id: docs-chain-build-advanced-create-universal-signer
title: Custom Universal Signer
hide_title: true
slug: ./custom-universal-signer
displayed_sidebar: pushChainSidebar
sidebar_position: 2
image: '/assets/docs/previews/docs_notifications_develop_fetch_chats--create_channel.png'
---

# Overview

If you don't have a supported library signer or want to create a custom implementation, you can construct a Universal Signer manually.

<head>
  <title>{`Custom Universal Signer | Build | Advanced | Push Chain | Push Documentation`}</title>
</head>

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Details from '@theme/Details';
import NodeJSVirtualIDE from '@site/src/components/NodeJSVirtualIDE/NodeJSVirtualIDE';

## Custom Universal Signer API
**_`PushChain.utils.signer.construct(account, {options}): Promise<UniversalSigner>`_**

```typescript
const account = {
  address: '<WALLET_ADDRESS>',
  chain: '<PushChain.CONSTANTS.CHAIN.CHAIN_TYPE'>
};

const customSignAndSendTransaction = async (unsignedTx) => {
  return new Uint8Array('<RESPONSE_TO_SIGN_AND_SEND_TRANSACTION>');
};

const customSignMessage = async (data) => {
  return new Uint8Array('<RESPONSE_TO_SIGN_MESSAGE>');
};

const customSignTypedData = async (typedDataArgs) => {
  return new Uint8Array('<RESPONSE_TO_SIGN_TYPED_DATA>');
};

const skeleton = PushChain.utils.signer.construct(account, {
  signMessage: customSignMessage,
  signTransaction: customSignTransaction,
  signTypedData: customSignTypedData
});

const universalSigner = await PushChain.utils.signer.toUniversal(skeleton);
```

| **Arguments**                        | **Type**                                          | **Description**                                        |
| ------------------------------------ | ------------------------------------------------- | ------------------------------------------------------ |
| _`account`_                          | `UniversalAccount`                                | Account information containing address and chain       |
| _`options`_                          | `Object`                                          | Object containing the signing function implementations |
| _`options.signAndSendTransaction`_   | `(unsignedTx: Uint8Array) => Promise<Uint8Array>` | Function to sign transaction data                      |
| _`options.signMessage`_              | `(data: Uint8Array) => Promise<Uint8Array>`       | Function to sign raw message data                      |
| `options.signTypedData`              | `(params) => Promise<Uint8Array>`                 | Function to sign typed data (EIP-712)                  |

> Note: These _`Arguments`_ are mandatory.

<Details summary="Returns `UniversalSignerSkeleton` <object>" className="alert alert--fn-args">

```typescript
// UniversalSignerSkeleton object
{
  signerId: 'CustomGeneratedSigner',
  account: {
    chain: 'eip155:42101',
    address: '0x98cA97d2FB78B3C0597E2F78cd11868cACF423C5'
  },
  signMessage: [AsyncFunction: customSignMessage],
  signAndSendTransaction: [AsyncFunction: customSignAndSendTransaction],
  signTypedData: [AsyncFunction: customSignTypedData]
} 
```

</Details>

**Live Playground Example:** Creating Custom Universal Signer from Ethers.js ðŸ‘‡.

<NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-examples/tree/main/sdk-functions/custom-universal-signer"}}>

{`
    // customPropHighlightRegexStart== PushChain\.utils\.signer\.construct
    // customPropHighlightRegexEnd=\\);
    // Import Push Chain Core
    import { PushChain } from '@pushchain/core';

    // Import if you are using ethers
    import { ethers } from 'ethers';
    import readline from 'readline';

    async function main() {
      // We need to pass the following to PushChain.utils.signer.construct(account, {options})
      // 1. account which is a universal account
      // 2. options which is an object with the following properties
      // 2.1 signAndSendTransaction
      // 2.2 signMessage
      // 2.3 signTypedData

      // 1. account to universal account
      // Create random wallet
      const wallet = ethers.Wallet.createRandom();
      
      // Convert wallet.address to Universal Account
      const universalAccount = PushChain.utils.account.toUniversal(wallet.address, {
        chain: PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA,
      });
      console.log('Created Universal Account', JSON.stringify(universalAccount))

      // 2. options to construct
      // 2.1 signAndSendTransaction
      
      // create custom Sign and Send Transaction
      const customSignAndSendTransaction = async (unsignedTx) => {
        // Sign the transaction using ethers wallet
        const signedTx = await wallet.signTransaction(unsignedTx);
        const sendTx = await wallet.sendTransaction(signedTx);

        // Always a Uint8Array
        return Uint8Array.from(sendTx);
      };

      // 2.2 signMessage
      const customSignMessage = async (message) => {
        // Sign message using ethers wallet
        const signature = await wallet.signMessage(message);

        // Always a Uint8Array
        return Uint8Array.from(signature);
      };
      
      // 2.3 signMessage
      const customSignTypedData = async (domain, types, value) => {
        // Sign typed data using ethers wallet
        const signature = await wallet._signTypedData(domain, types, value);

        // Always a Uint8Array
        return Uint8Array.from(signature);
      };
      
      // * Construct the universal signer skeleton with custom signing functions
      const universalSignerSkeleton = PushChain.utils.signer.construct(universalAccount, {
        signAndSendTransaction: customSignAndSendTransaction,
        signMessage: customSignMessage,
        signTypedData: customSignTypedData
      });
      console.log('Created Universal Signer Skeleton', JSON.stringify(universalSignerSkeleton));
      

      // ** Pass constructed universal signer skeleton to create universal signer **
      const universalSigner = await PushChain.utils.signer.toUniversal(universalSignerSkeleton);
      console.log('Created Universal Signer', JSON.stringify(universalSigner));
    }
    await main().catch(console.error);
                                                                                                                               
`}

</NodeJSVirtualIDE>

## Next Steps
- [Initialize Push Chain Client](/docs/chain/build/initialize-push-chain-client) with the Universal Signer
- Abstract away creation of the Universal Signer using [UI Kit](/docs/chain/build/ui-kit)

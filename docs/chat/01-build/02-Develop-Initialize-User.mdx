---
id: docs-chat-develop-initialize-user
title: Initialize User
hide_title: true
slug: ./initialize-user
displayed_sidebar: pushChatSidebar
sidebar_position: 2
image: "/assets/docs/previews/docs_chat_develop--initialize_user.png"
---

# Initialize user overview

Before you can start sending messages, or create conditional access group for your community, or send those chat requests to `Vitalik.eth`. you will need to initialize a user or re-authenticate the user. To do so you will use `PushAPI.initialize` call from `@pushprotocol/restapi` package.

<head>
  <title>Initialize User | Push Chat | Push Documentation</title>
</head>

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import Details from "@theme/Details";

## Initialize user API

<Tabs className="codetabs" groupId="code-examples">
  <TabItem value="js" attributes={{className: "codetab js"}} default>

```typescript
import { PushAPI, CONSTANTS } from "@pushprotocol/restapi";

// Initialize wallet user
// PushAPI.initialize(signer, {options?});
// 'CONSTANTS.ENV.PROD' -> mainnet apps | 'CONSTANTS.ENV.STAGING' -> testnet apps
const userAlice = await PushAPI.initialize(signer, {
  env: CONSTANTS.ENV.STAGING,
});
```

  </TabItem>
</Tabs>

The function automatically initializes and returns the **Push user profile** object if one doesn't exist for the user or alternatively creates a new profile if the user has not been onboarded to Push network. This profile is used to interact with all function calls moving forward.

### Setting the right environment

Push Network operates on the following environments —

- **Production** - You will need to set `env` in `options` object to 'prod' to enable mainnet apps communication.
- **Staging** - Set by default, can omit `options` if testing your app on testnet.

---

### Initialize user parameters

When initializing your user, you can customize the process using several parameters. Here's a breakdown:

| Param      | Type                     | Sub-Type                               | Default       | Remarks                                                                                                                                                                              |
| ---------- | ------------------------ | -------------------------------------- | ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| _`signer`_ | `SignerType`             | -                                      | -             | EthersV5 or Viem Signer                                                                                                                                                              |
| `options`  | `PushAPIInitializeProps` | -                                      | -             | Optional configuration properties for initializing the PushAPI.                                                                                                                      |
| -          | `options.env`            | `ENV`                                  | `staging`     | API env - 'prod' or 'staging'                                                                                                                                                        |
| -          | `options.progressHook`   | `(progress: ProgressHookType) => void` | -             | A callback function to receive progress updates during initialization.                                                                                                               |
| -          | `options.account`        | `string`                               | -             | The [account](/docs/chat/build/initialize-user#use-lens-profile--any-nfts--chain-agnostic-wallet-address) to associate with the PushAPI. If not provided, it is derived from signer. |
| -          | `options.version`        | `string`                               | `ENC_TYPE_V3` | The [encryption version](/docs/chat/concepts/encryption-version-in-push-chat) to use for the PushAPI                                                                                 |
| -          | `options.versionMeta`    | `{ NFTPGP_V1 ?: password: string }`    | -             | Metadata related to the encryption version, including a password if needed.                                                                                                          |
| -          | `options.autoUpgrade`    | `boolean`                              | `true`        | If `true`, upgrades encryption keys to latest encryption version                                                                                                                     |
| -          | `options.origin`         | `string`                               | -             | Specify origin or source while creating a Push Profile                                                                                                                               |

> Note: Parameters _`in this style`_ are mandatory.

<Details summary="Expected response">
```typescript
{
  {
    account: "0xC785989454C958eF0fD343e3E6DcCDf9893a5b02",
    channel: Channel {
        signer: JsonRpcSigner, 
        env: 'prod', 
        guestMode: true, 
        account: '0xC785989454C958eF0fD343e3E6DcCDf9893a5b02', 
        info: ƒ, 
        …
      },
    chat: Chat {
      account: '0xC785989454C958eF0fD343e3E6DcCDf9893a5b02', 
      decryptedPgpPvtKey: '-----BEGIN PGP PRIVATE KEY BLOCK-----\n\nxcLYBGQRtHI…nYedYb\n=o4+2\n-----END PGP PRIVATE KEY BLOCK-----\n', 
      env: 'prod', 
      signer: JsonRpcSigner, 
      progressHook: undefined, 
      …
      },
    decryptedPgpPvtKey: "-----BEGIN PGP PRIVATE KEY BLOCK-----\n\n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\nJPYaDBOrwODHzX8INjnYedYb\n=o4+2\n-----END PGP PRIVATE KEY BLOCK-----\n",
    encryption: Encryption {
      account: '0xC785989454C958eF0fD343e3E6DcCDf9893a5b02', 
      decryptedPgpPvtKey: '-----BEGIN PGP PRIVATE KEY BLOCK-----\n\nxcLYBGQRtHI…nYedYb\n=o4+2\n-----END PGP PRIVATE KEY BLOCK-----\n', 
      pgpPublicKey: '-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nxsBNBGQRtHIB…HnWGw==\n=h2rm\n-----END PGP PUBLIC KEY BLOCK-----\n', 
      env: 'prod', 
      signer: JsonRpcSigner, 
      …
    },
    env: "prod",
    notification: Notification {
      signer: JsonRpcSigner, 
      env: 'prod', 
      guestMode: true, 
      account: '0xC785989454C958eF0fD343e3E6DcCDf9893a5b02', 
      list: ƒ, 
      …
    },
    pgpPublicKey: "-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nxsBNBGQRtHIBCADWGXf/Ir844r6xG4FIoprXLv8LaekzuEDT1pYckE4TQSub\n6y1pCCF/eMWvUePvWBAgX8cNdBQ96gxnOB0Kxu2wQTWqLQ0PrL9ggF0dNQcQ\nPbPghOOTWwO2h/TKNa9KrhkCh9m9zjQU9o8w4HxOOJ74t8T9OXqYMOXBMSOr\nVw2bnGQfSodZV7PTJUqmA7ap5JwbGcNP9t1/XH87f6HFSgPwgN5u9rgKAwhJ\nFwujZxSJv2IPRNzpDAq/r/C+fgofkV9/kwU3odsKNMJ+REfNOhDVo+nBLHAu\nTloMkc2WSLJDSu9j8sNZPVrpUaa1c7bbxX5fVTXzW+n2/L2xBkWSfy11ABEB\nAAHNAMLAigQQAQgAPgWCZBG0cgQLCQcICZApG4QIthENGgMVCAoEFgACAQIZ\nAQKbAwIeARYhBGgybFDK2EulZ5avyikbhAi2EQ0aAAA/JQf7B6cVf1OHFncZ\nA/XprZxLLyLbRG3l8nHi8Ujd8IVWavecgYbn0zKuRbHvfkNKKXRKYQ3eMpP8\ns1XRofybhl3J6D5eSPMnw4sxysfteNBoPrBZKFCnY4JFzEDGX7XFIFnJ4ZTU\ncmCp3p0OO86ES3rSG2esmcF/uGUOSf71PspNPKWPfFT4EkpMzYsN8khJv6zA\nqmwYKfz7lCpcef/Wr20kRSN641Z2ZzpVhPQYsVpjcIboVZvb2b1lPUw6v6um\n+c6r4ONgC8HQD8vaC8aozYay9OOf5aDRT0CE8hivurA59TE1akvHDLly4F1H\nIBdShArEO0P7iM2UDZ8enNAloMOM687ATQRkEbRyAQgA3E9cwruXEXB7AwM1\nMzs9I8f2BI4xV+CddArdexeC1w/8zI3pJUYjZU3QlyAmZs9CYqjWil4CYBXy\nke+D4WVg7htEU2DykCrW1pqW+YFIXdN5p6MLOYfPKW7EU4lq1bRC3AnKHa0g\nz5XrmrU89Z8PmcLVtXeAwHM5M/cnCjHQD3a9W4WiglBgYJCqhMoxNK587WRw\n6kqzCp6OVBGozGrrmr+Cjy8fbpmHyjzss/8984RTS14TrCS33cTdTbd52R6p\nAFK3WEDyiJxBfjyZ5UTZlwcpNR84cAWheRUg9RNgnBuOwclsdZdMonfMXsUy\nYJaQKJ4vIbdme1kr31uxVdn/9QARAQABwsB2BBgBCAAqBYJkEbRyCZApG4QI\nthENGgKbDBYhBGgybFDK2EulZ5avyikbhAi2EQ0aAACoYAf/ZjF6FfGDdUZn\nshJPYVTIlhy7w+cImozxHDGZWZah2bjddnJ8a4jedSa6oSYBeBP5vnvw7Smf\n5+CvwCrIQdzBlM1VyRWRdlP9e3QixTCqDgfyUVKRavYYgH8l9MFAw57Bq8Y+\nsckgDkY7A04cYvd93SCclwGC4X9GshnBYgbjPbAqOSPBhq1i+i1R+zYGqy92\nPGxT83rgjJiXIjhiVxZCzZVy+X8KU58nQLIbWj2zR0xgO7oMnaZFOMYtHtoe\nmCIq58+IQt7ETENsqYKR5u+f6ep5+pF0vtvZBDp2DVVMvoabUW5AP31NsFdG\nwUJaHST2GgwTq8Dgx81/CDY52HnWGw==\n=h2rm\n-----END PGP PUBLIC KEY BLOCK-----\n",
    profile: Profile {
      account: '0xC785989454C958eF0fD343e3E6DcCDf9893a5b02', 
      decryptedPgpPvtKey: '-----BEGIN PGP PRIVATE KEY BLOCK-----\n\nxcLYBGQRtHI…nYedYb\n=o4+2\n-----END PGP PRIVATE KEY BLOCK-----\n', 
      env: 'prod', 
      progressHook: undefined
    },
    progressHook: undefined,
    signer: JsonRpcSigner {
      _isSigner: true, 
      provider: Web3Provider, 
      _index: 0, 
      _address: null
    },
    user: User {
      account: '0xC785989454C958eF0fD343e3E6DcCDf9893a5b02', 
      env: 'prod'
    },
  }
}
```

</Details>

---

### Initialize user interface

```typescript
/**
 * Initialization Parameters for PushAPI
 */

/**
 * Specifies the type of signer.
 * Choose between EthersV5 or Viem Signer.
 */
type Signer = SignerType;

interface PushAPIInitializeProps {
  /**
   * Sets the API environment.
   * Options: 'prod', 'staging', 'dev'
   * Default: 'staging'
   */
  env?: ENV;

  /**
   * A callback function to receive updates during the initialization process.
   */
  progressHook?: (progress: ProgressHookType) => void;

  /**
   * The account you want to link with the PushAPI.
   * If left empty, it'll use the account associated with your signer.
   */
  account?: string;

  /**
   * Specifies the encryption version for the PushAPI.
   * Default: 'ENC_TYPE_V3'
   */
  version?: string;

  /**
   * Provides additional data related to your chosen encryption version,
   * like a necessary password.
   */
  versionMeta?: {
    NFTPGP_V1?: {
      password: string;
    };
  };

  /**
   * When set to true, the system will automatically upgrade encryption keys
   * to the latest available encryption version.
   * Default: true
   */
  autoUpgrade?: boolean;

  /**
   * Defines the origin or source when setting up a Push Profile.
   */
  origin?: string;
}

/**
 * Initializes the PushAPI with given parameters.
 *
 * @param signer The type of signer (EthersV5 or Viem Signer).
 * @param options Optional configurations for initializing the PushAPI.
 */
function initializePushAPI(signer: Signer, options?: PushAPIInitializeProps) {
  // Initialization logic here
}
```

## Using for Lens / Cyberconnect / Any NFTs

:::note
Intermediate section, can be skipped unless you are planning to message NFT, .lens, .polygon or different blockchains.
:::

Push Chat supports Lens, Cyberconnect, NFT wallets and any EVM or non-EVM wallets. Since address standards for all of these are different, we came up with a compatible standard that is chain agnostic to ensure cross-chain messaging or cross-nft messaging can become a reality.

This lead us to introduce support for multiple wallet address formats and coining the word _`account`_ instead of `address` to be used in parameters wherever necessary.

### Standard Wallet Address

- **Standard Wallet Address** - Standard wallet is supported and used by default
- _`usage`_ - `0x99A08ac6254dcf7ccc37CeC662aeba8eFA666666`

### Chain Agnostic Wallet Address

- **Chain Agnostic Wallet Address** - Pass **`{chain_standard}:{account_id}`** format to use this instead of standard wallet address. SDK converts all normal wallet address to chain agnostic ones by default.
- _`usage`_ - `eip155:0x99A08ac6254dcf7ccc37CeC662aeba8eFA666666`
- _`usage`_ - `cosmos:cosmos1t2uflqwqe0fsj0shcfkrvpukewcw40yjj6hdc0`
- _`usage`_ - `starknet:0x02dd1b492765c064eac4039e3841aa5f382773b598097a40073bd8b48170ab57`

:::note
Blockchain Agnostic Wallet Address has been inspired by [CAIP-10 standard](https://github.com/ChainAgnostic/CAIPs/blob/main/CAIPs/caip-10.md), which is a great step in marking wallet address blockchain agnostic.
:::

### Lens profile / Cyberconnect profile / NFT profile

- **NFT profile** - Pass **`nft:{chain_standard}:{nftChainId}:{nftContractAddress}:{nftTokenId}`**
- _`usage`_ - `nft:eip155:11155111:0x42af3147f17239341477113484752D5D3dda997B:2:1683058528`
